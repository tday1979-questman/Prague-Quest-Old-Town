<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>King Charles IV Quest</title>
    <style>
        body { font-family: sans-serif; background-color: #f4e4bc; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        #chat-container { width: 100%; max-width: 500px; background: white; border: 4px solid #8b4513; border-radius: 15px; }
        #header { background: #8b4513; color: white; padding: 15px; text-align: center; font-weight: bold; }
        #chat-box { height: 400px; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 10px; border-radius: 10px; max-width: 80%; }
        .karel { background: #fdf2d0; align-self: flex-start; border-left: 5px solid #d4af37; }
        .user { background: #007bff; color: white; align-self: flex-end; }
        #input-area { display: flex; padding: 10px; border-top: 1px solid #ddd; }
        input { flex-grow: 1; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
        button { background: #8b4513; color: white; border: none; padding: 10px; margin-left: 5px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ðŸ‘‘ The Royal Quest</h1>
    <div id="chat-container">
        <div id="header">Chat with King Charles IV</div>
        <div id="chat-box" id="chatbox">
            <div class="msg karel">Greetings, young scholar! Why are you not wearing a tunic? No matter... tell me, is my secret bell made of metal, or stone?</div>
        </div>
        <div id="input-area">
            <input type="text" id="user-input" placeholder="Type here..." onkeypress="if(event.key==='Enter')sendMessage()">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>
    <script>
        let stop = 1;
        function sendMessage() {
            const input = document.getElementById('user-input');
            const box = document.getElementById('chat-box');
            if (input.value.trim() === "") return;

            const uDiv = document.createElement('div');
            uDiv.className = 'msg user';
            uDiv.textContent = input.value;
            box.appendChild(uDiv);

            const val = input.value.toLowerCase();
            input.value = "";

            setTimeout(() => {
                const kDiv = document.createElement('div');
                kDiv.className = 'msg karel';
                let txt = "";

                if (stop === 1) {
                    if (val.includes("stone") || val.includes("rock") || val.includes("kamen")) {
                        txt = "Huzzah! It is stone! Now, find the man named 'Vanity' at the Clock. What is he holding?";
                        stop = 2;
                    } else { txt = "Look closer! Is it cold metal or rough stone? Off you go!"; }
                } else if (stop === 2) {
                    if (val.includes("mirror") || val.includes("zrcadlo")) {
                        txt = "A mirror! He is very proud. Now, find the Kingfisher bird at the Bridge Tower. What is the bird sitting inside?";
                        stop = 3;
                    } else { txt = "He is looking at his own face... what is he holding?"; }
                } else if (stop === 3) {
                    if (val.includes("wreath") || val.includes("circle") || val.includes("veil") || val.includes("venec")) {
                        txt = "Correct! A wreath! You are a master scholar. My magic number is 1357 9 7 5 3 1. You have earned your Royal Diploma!";
                        stop = 4;
                    } else { txt = "Look for the bird inside a stone circle or wreath!"; }
                } else { txt = "You have the victory! Well done, little knight!"; }

                kDiv.innerHTML = txt;
                box.appendChild(kDiv);
                box.scrollTop = box.scrollHeight;
            }, 600);
        }
    </script>
</body>
</html>
